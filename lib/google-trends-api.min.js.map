{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///google-trends-api.min.js","webpack:///webpack/bootstrap 89bc46d11d49f1e6ed0f","webpack:///./src/index.js","webpack:///./src/api.js","webpack:///./src/utilities.js","webpack:///./src/request.js","webpack:///external \"https\"","webpack:///external \"querystring\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_api","_api2","interestByRegion","interestOverTime","relatedQueries","relatedTopics","_utilities","searchType","reqObj","cb","_constructObj","constructObj","cbFunc","Error","Promise","reject","getResults","then","res","err","isLessThan7Days","date1","date2","Math","abs","convertDateToString","d","shouldIncludeTime","month","getUTCMonth","toString","length","day","getUTCDate","year","getUTCFullYear","hour","getUTCHours","minute","getUTCMinutes","formatTime","startTime","Date","endTime","temp","time","_typeof","Array","isArray","keyword","hl","formatResolution","resolution","arguments","undefined","resolutions","isResValid","some","toUpperCase","parseResults","results","JSON","parse","slice","widgets","e","requestBody","formatKeywords","reduce","arr","push","_extends","map","interest over time","path","pos","interest by region","related topics","related queries","options","method","host","qs","req","stringify","comparisonItem","cat","tz","_map$searchType","_request2","parsedResults","request","token","nextOptions","assign","target","i","source","key","prototype","hasOwnProperty","Symbol","iterator","constructor","_request","_ref","_querystring2","resolve","_https2","chunk","on","data","end","_https","_querystring"],"mappings":"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","file":"google-trends-api.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"https\"), require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"google-trends-api\", [\"https\", \"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"google-trends-api\"] = factory(require(\"https\"), require(\"querystring\"));\n\telse\n\t\troot[\"google-trends-api\"] = factory(root[\"https\"], root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _api = __webpack_require__(1);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  interestByRegion: (0, _api2.default)('interest by region'),\n\t  interestOverTime: (0, _api2.default)('interest over time'),\n\t  relatedQueries: (0, _api2.default)('related queries'),\n\t  relatedTopics: (0, _api2.default)('related topics')\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _utilities = __webpack_require__(2);\n\t\n\texports.default = function (searchType) {\n\t  return function (reqObj, cb) {\n\t    var _constructObj = (0, _utilities.constructObj)(reqObj, cb),\n\t        cbFunc = _constructObj.cbFunc,\n\t        obj = _constructObj.obj;\n\t\n\t    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\n\t\n\t    return (0, _utilities.getResults)(searchType, obj).then(function (res) {\n\t      return cbFunc(null, res);\n\t    }).catch(function (err) {\n\t      return Promise.reject(cbFunc(err));\n\t    });\n\t  };\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.isLessThan7Days = isLessThan7Days;\n\texports.convertDateToString = convertDateToString;\n\texports.formatTime = formatTime;\n\texports.constructObj = constructObj;\n\texports.formatResolution = formatResolution;\n\texports.parseResults = parseResults;\n\texports.formatKeywords = formatKeywords;\n\texports.getResults = getResults;\n\t\n\tvar _request = __webpack_require__(3);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction isLessThan7Days(date1, date2) {\n\t  return Math.abs(date2 - date1) / (24 * 60 * 60 * 1000) < 7;\n\t};\n\t\n\tfunction convertDateToString(d, shouldIncludeTime) {\n\t  var month = (d.getUTCMonth() + 1).toString();\n\t\n\t  month = month.length < 2 ? '0' + month : month;\n\t  var day = d.getUTCDate().toString();\n\t  var year = d.getUTCFullYear().toString();\n\t  var hour = d.getUTCHours();\n\t  var minute = d.getUTCMinutes();\n\t\n\t  if (shouldIncludeTime) {\n\t    return year + '-' + month + '-' + day + 'T' + hour + '\\\\:' + minute + '\\\\:00';\n\t  }\n\t\n\t  return year + '-' + month + '-' + day;\n\t};\n\t\n\tfunction formatTime(obj) {\n\t  if (obj.startTime && !(obj.startTime instanceof Date)) {\n\t    return new Error('startTime must be a Date object');\n\t  }\n\t  if (obj.endTime && !(obj.endTime instanceof Date)) {\n\t    return new Error('endTime must be a Date object');\n\t  }\n\t\n\t  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\n\t    var temp = obj.startTime;\n\t\n\t    obj.startTime = obj.endTime;\n\t    obj.endTime = temp;\n\t  }\n\t\n\t  if (!obj.endTime) obj.endTime = new Date();\n\t  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\n\t\n\t  var shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\n\t\n\t  var startTime = convertDateToString(obj.startTime, shouldIncludeTime);\n\t  var endTime = convertDateToString(obj.endTime, shouldIncludeTime);\n\t\n\t  obj.time = startTime + ' ' + endTime;\n\t  return obj;\n\t};\n\t\n\tfunction constructObj(obj, cbFunc) {\n\t  if (typeof obj === 'function') cbFunc = obj;\n\t\n\t  if (!obj || !!obj && (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || Array.isArray(obj)) {\n\t    obj = new Error('Must supply an object');\n\t  } else if (!obj.keyword) obj = new Error('Must have a keyword field');\n\t\n\t  if (!!cbFunc && typeof cbFunc !== 'function') {\n\t    obj = new Error('Callback function must be a function');\n\t  }\n\t\n\t  if (!obj.hl) obj.hl = 'en-US';\n\t\n\t  if (!cbFunc) {\n\t    cbFunc = function cbFunc(err, res) {\n\t      if (err) return err;\n\t      return res;\n\t    };\n\t  }\n\t\n\t  obj = formatTime(obj);\n\t\n\t  return {\n\t    cbFunc: cbFunc,\n\t    obj: obj\n\t  };\n\t};\n\t\n\tfunction formatResolution() {\n\t  var resolution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\t\n\t  var resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\n\t  var isResValid = resolutions.some(function (res) {\n\t    return res === resolution.toUpperCase();\n\t  });\n\t\n\t  if (isResValid) return resolution.toUpperCase();\n\t  return '';\n\t}\n\t\n\t/**\n\t * Parse the result of the google api as JSON\n\t * Throws an Error if the JSON is invalid\n\t * @param  {[type]} results [description]\n\t * @return {[type]}         [description]\n\t */\n\tfunction parseResults(results) {\n\t  // If this fails, you've hit the rate limit or Google has changed something\n\t  try {\n\t    return JSON.parse(results.slice(4)).widgets;\n\t  } catch (e) {\n\t    // Throw the JSON error e.g.\n\t    // { message: 'Unexpected token C in JSON at position 0',\n\t    //   requestBody: '<!DOCTYPE html><html>...'}\n\t    e.requestBody = results;\n\t    throw e;\n\t  }\n\t}\n\t\n\tfunction formatKeywords(obj) {\n\t\n\t  // If we are requesting an array of keywords for comparison\n\t  if (Array.isArray(obj.keyword)) {\n\t\n\t    // Map the keywords to the items array\n\t    return obj.keyword.reduce(function (arr, keyword) {\n\t      // Add the keyword to the array\n\t      arr.push(_extends({}, obj, { keyword: keyword }));\n\t\n\t      return arr;\n\t    }, []);\n\t  }\n\t\n\t  return [obj];\n\t}\n\t\n\tfunction getResults(searchType, obj) {\n\t  var map = {\n\t    'interest over time': {\n\t      path: '/trends/api/widgetdata/multiline',\n\t      pos: 0\n\t    },\n\t    'interest by region': {\n\t      path: '/trends/api/widgetdata/comparedgeo',\n\t      pos: 1,\n\t      resolution: formatResolution(obj.resolution)\n\t    },\n\t    'related topics': {\n\t      path: '/trends/api/widgetdata/relatedsearches',\n\t      pos: 2\n\t    },\n\t    'related queries': {\n\t      path: '/trends/api/widgetdata/relatedsearches',\n\t      pos: 3\n\t    }\n\t  };\n\t\n\t  var options = {\n\t    method: 'GET',\n\t    host: 'trends.google.com',\n\t    path: '/trends/api/explore',\n\t    qs: {\n\t      hl: obj.hl,\n\t      req: JSON.stringify({ comparisonItem: formatKeywords(obj), cat: 0 }),\n\t      tz: 300\n\t    }\n\t  };\n\t\n\t  var _map$searchType = map[searchType],\n\t      pos = _map$searchType.pos,\n\t      path = _map$searchType.path,\n\t      resolution = _map$searchType.resolution;\n\t\n\t\n\t  return (0, _request2.default)(options).then(function (results) {\n\t    var parsedResults = parseResults(results);\n\t\n\t    var req = parsedResults[pos].request;\n\t\n\t    if (resolution) req.resolution = resolution;\n\t    req = JSON.stringify(req);\n\t    var token = parsedResults[pos].token;\n\t    var nextOptions = {\n\t      path: path,\n\t      method: 'GET',\n\t      host: 'trends.google.com',\n\t      qs: {\n\t        hl: obj.hl,\n\t        req: req,\n\t        token: token,\n\t        tz: 300\n\t      }\n\t    };\n\t\n\t    return (0, _request2.default)(nextOptions);\n\t  }).then(function (res) {\n\t    return res.slice(5);\n\t  });\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = request;\n\t\n\tvar _https = __webpack_require__(4);\n\t\n\tvar _https2 = _interopRequireDefault(_https);\n\t\n\tvar _querystring = __webpack_require__(5);\n\t\n\tvar _querystring2 = _interopRequireDefault(_querystring);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction request(_ref) {\n\t  var method = _ref.method,\n\t      host = _ref.host,\n\t      path = _ref.path,\n\t      qs = _ref.qs;\n\t\n\t  var options = {\n\t    host: host,\n\t    method: method,\n\t    path: path + '?' + _querystring2.default.stringify(qs)\n\t  };\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    var req = _https2.default.request(options, function (res) {\n\t      var chunk = '';\n\t\n\t      res.on('data', function (data) {\n\t        chunk += data;\n\t      });\n\t\n\t      res.on('end', function () {\n\t        resolve(chunk.toString('utf8'));\n\t      });\n\t    });\n\t\n\t    req.on('error', function (e) {\n\t      reject(e);\n\t    });\n\t\n\t    req.end();\n\t  });\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"https\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"querystring\");\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** google-trends-api.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 89bc46d11d49f1e6ed0f\n **/","'use strict';\n\nimport api from './api';\n\nexport default {\n  interestByRegion: api('interest by region'),\n  interestOverTime: api('interest over time'),\n  relatedQueries: api('related queries'),\n  relatedTopics: api('related topics'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","'use strict';\n\nimport { constructObj, getResults } from './utilities';\n\nexport default (searchType) => {\n  return (reqObj, cb) => {\n    const {\n      cbFunc,\n      obj,\n    } = constructObj(reqObj, cb);\n\n    if (obj instanceof Error) return Promise.reject(cbFunc(obj));\n\n    return getResults(searchType, obj)\n    .then(res => cbFunc(null, res))\n    .catch(err => Promise.reject(cbFunc(err)));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/api.js\n **/","'use strict';\nimport request from './request';\n\nexport function isLessThan7Days(date1, date2) {\n  return (Math.abs(date2 - date1) / (24 * 60 * 60 * 1000)) < 7;\n};\n\nexport function convertDateToString(d, shouldIncludeTime) {\n  let month = (d.getUTCMonth() + 1).toString();\n\n  month = month.length < 2 ? '0' + month : month;\n  const day = d.getUTCDate().toString();\n  const year = d.getUTCFullYear().toString();\n  const hour = d.getUTCHours();\n  const minute = d.getUTCMinutes();\n\n  if (shouldIncludeTime) {\n    return `${year}-${month}-${day}T${hour}\\\\:${minute}\\\\:00`;\n  }\n\n  return `${year}-${month}-${day}`;\n};\n\nexport function formatTime(obj) {\n  if (obj.startTime && !(obj.startTime instanceof Date)) {\n    return new Error('startTime must be a Date object');\n  }\n  if (obj.endTime && !(obj.endTime instanceof Date)) {\n    return new Error('endTime must be a Date object');\n  }\n\n  if (obj.startTime && obj.endTime && obj.startTime > obj.endTime) {\n    const temp = obj.startTime;\n\n    obj.startTime = obj.endTime;\n    obj.endTime = temp;\n  }\n\n  if (!obj.endTime) obj.endTime = new Date();\n  if (!obj.startTime) obj.startTime = new Date('2004-01-01');\n\n  const shouldIncludeTime = isLessThan7Days(obj.startTime, obj.endTime);\n\n  const startTime = convertDateToString(obj.startTime, shouldIncludeTime);\n  const endTime = convertDateToString(obj.endTime, shouldIncludeTime);\n\n  obj.time = `${startTime} ${endTime}`;\n  return obj;\n};\n\nexport function constructObj(obj, cbFunc) {\n  if (typeof obj === 'function') cbFunc = obj;\n\n  if (!obj || !!obj && typeof obj !== 'object' || Array.isArray(obj)) {\n    obj = new Error('Must supply an object');\n  } else if (!obj.keyword) obj = new Error('Must have a keyword field');\n\n  if (!!cbFunc && typeof cbFunc !== 'function') {\n    obj = new Error('Callback function must be a function');\n  }\n\n  if (!obj.hl) obj.hl = 'en-US';\n\n  if (!cbFunc) {\n    cbFunc = (err, res) => {\n      if (err) return err;\n      return res;\n    };\n  }\n\n  obj = formatTime(obj);\n\n  return {\n    cbFunc,\n    obj,\n  };\n};\n\nexport function formatResolution(resolution = '') {\n  const resolutions = ['COUNTRY', 'REGION', 'CITY', 'DMA'];\n  const isResValid = resolutions.some((res) => {\n    return res === resolution.toUpperCase();\n  });\n\n  if (isResValid) return resolution.toUpperCase();\n  return '';\n}\n\n/**\n * Parse the result of the google api as JSON\n * Throws an Error if the JSON is invalid\n * @param  {[type]} results [description]\n * @return {[type]}         [description]\n */\nexport function parseResults(results) {\n  // If this fails, you've hit the rate limit or Google has changed something\n  try {\n    return JSON.parse(results.slice(4)).widgets;\n  } catch (e) {\n    // Throw the JSON error e.g.\n    // { message: 'Unexpected token C in JSON at position 0',\n    //   requestBody: '<!DOCTYPE html><html>...'}\n    e.requestBody = results;\n    throw e;\n  }\n}\n\nexport function formatKeywords(obj) {\n\n  // If we are requesting an array of keywords for comparison\n  if (Array.isArray(obj.keyword)) {\n\n    // Map the keywords to the items array\n    return obj.keyword.reduce((arr, keyword) => {\n      // Add the keyword to the array\n      arr.push({ ...obj, keyword });\n\n      return arr;\n    }, []);\n\n  }\n\n  return [obj];\n}\n\nexport function getResults(searchType, obj) {\n  const map = {\n    'interest over time': {\n      path: '/trends/api/widgetdata/multiline',\n      pos: 0,\n    },\n    'interest by region': {\n      path: '/trends/api/widgetdata/comparedgeo',\n      pos: 1,\n      resolution: formatResolution(obj.resolution),\n    },\n    'related topics': {\n      path: '/trends/api/widgetdata/relatedsearches',\n      pos: 2,\n    },\n    'related queries': {\n      path: '/trends/api/widgetdata/relatedsearches',\n      pos: 3,\n    },\n  };\n\n  const options = {\n    method: 'GET',\n    host: 'trends.google.com',\n    path: '/trends/api/explore',\n    qs: {\n      hl: obj.hl,\n      req: JSON.stringify({comparisonItem: formatKeywords(obj), cat: 0}),\n      tz: 300,\n    },\n  };\n\n  const {pos, path, resolution} = map[searchType];\n\n  return request(options)\n  .then((results) => {\n    let parsedResults = parseResults(results);\n\n    let req = parsedResults[pos].request;\n\n    if (resolution) req.resolution = resolution;\n    req = JSON.stringify(req);\n    const token = parsedResults[pos].token;\n    const nextOptions = {\n      path,\n      method: 'GET',\n      host: 'trends.google.com',\n      qs: {\n        hl: obj.hl,\n        req,\n        token,\n        tz: 300,\n      },\n    };\n\n    return request(nextOptions);\n  })\n  .then((res) => {\n    return res.slice(5);\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/utilities.js\n **/","'use strict';\nimport https from 'https';\nimport querystring from 'querystring';\n\nexport default function request({method, host, path, qs}) {\n  const options = {\n    host,\n    method,\n    path: `${path}?${querystring.stringify(qs)}`,\n  };\n\n  return new Promise((resolve, reject) => {\n    const req = https.request(options, (res) => {\n      let chunk = '';\n\n      res.on('data', (data) => {\n        chunk += data;\n      });\n\n      res.on('end', () => {\n        resolve(chunk.toString('utf8'));\n      });\n    });\n\n    req.on('error', (e) => {\n      reject(e);\n    });\n\n    req.end();\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/request.js\n **/","module.exports = require(\"https\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"https\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}